/* assets/my_style.css */
/* ==========================================================================
   Markdown CSS (VS Code Preview + Pandoc HTML 互換)
   - VS Code: body.vscode-body が本文ルートになる
   - Pandoc: body 直下に本文 / #TOC などが出ることが多い
   - 既存資産互換: .body を使っているHTMLにも適用
   ========================================================================== */

/* =========================
   0) 対象ルートの統一
   ========================= */
/* ここに書いた値は「本文領域」に効く。VSCode/Pandoc/既存(.body)を同一扱いにする */
:root {
    /* color pallet */
    --color-main-blue: #003B83;
    --color-red0: #420011;
    --color-red1: #DC003C;
    --color-red2: #EC7394;
    --color-red3: #FAD9E2;
    --color-blue0: #001942;
    --color-blue1: #0054DC;
    --color-blue2: #80AEF8;
    --color-blue3: #E2ECFD;
    --color-gray0: #212121;
    --color-gray1: #595757;
    --color-gray2: #939292;
    --color-gray3: #E6E6E6;
    --color-green0: #004229;
    --color-green1: #329B73;
    --color-green2: #7ABEA4;
    --color-green3: #E0F0EA;
    --color-yellow0: #423100;
    --color-yellow1: #DCA000;
    --color-yellow2: #E8C159;
    --color-yellow3: #E8FCCC;

    /* 色の基準（必要ならここだけ変える） */
    --text: black;
    --muted: var(--color-gray1);
    --link: var(--color-green1);
    --link-hover: var(--color-green2);

    --bg: #ffffff;
    --border: var(--color-gray2);

    --accent: var(--color-main-blue);
    --accent2: var(--color-blue1);

    /* 余白・サイズ */
    --base-font: 14px;
    --h1-font: 32px;
    --h2-font: 24px;
    --h3-font: 16px;
    --h4-font: var(--base-font);
    --h5-font: var(--base-font);
    --h6-font: var(--base-font);
    --line: 1.2;
    --content-max: 800px;

    /* 文字幅ベースで読みやすい最大幅 */
    --content-pad-x: 0px;
    --content-pad-y: 0px;

    /* li関連の余白 */
    --li-line: 1.2em;
    --li-gap-y: 0.25em;
    --li-inner-gap-y: 0.15em;

    /* コードブロック */
    --code-bg: var(--color-yellow3);
}

/* 本文ルート（VSCode / GitHub風 / 既存 .body / 素の body） */
body,
body.vscode-body,
.markdown-preview.markdown-preview body,
.markdown-body,
.body {
    color: var(--text);
    background: var(--bg);
    font-size: var(--base-font);
    line-height: var(--line);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial,
        "Apple Color Emoji", "Segoe UI Emoji", sans-serif;

    /* “ページとしての読みやすさ” を優先 */
    max-width: var(--content-max);
    margin: 20px auto;
    padding: var(--content-pad-y) var(--content-pad-x);
    word-wrap: break-word;

    /* 画像や表が横にはみ出たときに致命傷になりがちなので保険 */
    overflow-wrap: anywhere;
}

/* =========================
   1) 見出し
   ========================= */
/* Pandoc/VSCode は h1-h6 をそのまま出すため、ルート直下の見出しを指定 */
body h1,
body.vscode-body h1,
.markdown-body h1,
.markdown-preview.markdown-preview h1,
.body h1 {
    font-size: var(--h1-font);
    font-weight: 700;
    text-align: center;
    /* 元CSSの意図を踏襲 */
    color: var(--accent);
    margin: 0.3em auto 0.3em;
    padding-bottom: 0.2em;
    border-bottom: 1px solid var(--accent);
    /* small-caps はフォント依存で崩れるので、必要ならコメントアウト解除 */
    /* font-variant: small-caps; */
}

body h2,
body.vscode-body h2,
.markdown-body h2,
.markdown-preview.markdown-preview h2,
.body h2 {
    font-size: var(--h2-font);
    font-weight: 650;
    color: var(--accent);
    margin: 0.5em 0 0.5em;
    padding-bottom: 0.25em;
    border-bottom: 1px solid var(--accent);
}

body h3,
body.vscode-body h3,
.markdown-body h3,
.markdown-preview.markdown-preview h3,
.body h3 {
    font-size: var(--h3-font);
    font-weight: 650;
    color: var(--accent2);
    margin: 0.3em 0 0.3em;
}

/* h4-6 は控えめに */
body h4,
body.vscode-body h4,
.markdown-body h4,
.markdown-preview.markdown-preview h4,
.body h4 {
    font-size: var(--h4-font);
    font-weight: 650;
    margin: 0.3em 0 0.3em;
}

body h5,
body.vscode-body h5,
.markdown-body h5,
.markdown-preview.markdown-preview h5,
.body h5 {
    font-size: var(--h5-font);
    font-weight: 650;
    margin: 0.3em 0 0.3em;
}

body h6,
body.vscode-body h6,
.markdown-body h6,
.markdown-preview.markdown-preview h6,
.body h6 {
    font-size: var(--h6-font);
    font-weight: 650;
    color: var(--muted);
    margin: 0.3em 0 0.1em;
}

/* =========================
   2) 段落・強調
   ========================= */
body p,
body.vscode-body p,
.markdown-body p,
.markdown-preview.markdown-preview p,
.body p {
    margin: 0.2em 0 0.5em;
    /* 元CSS: 段落字下げ＋左右マージン が混ざっていたので整理 */
    text-indent: 1em;
    /* 段落頭を1文字分下げる */
}

body strong,
body.vscode-body strong,
.markdown-body strong,
.markdown-preview.markdown-preview strong,
.body strong {
    color: var(--color-red1);
}

body em,
body.vscode-body em,
.markdown-body em,
.markdown-preview.markdown-preview em,
.body em {
    color: var(--color-green1);
}

/* リンク */
body a,
body.vscode-body a,
.markdown-body a,
.markdown-preview.markdown-preview a,
.body a {
    color: var(--link);
    text-decoration: none;
}

body a:hover,
body.vscode-body a:hover,
.markdown-body a:hover,
.markdown-preview.markdown-preview a:hover,
.body a:hover {
    color: var(--link-hover);
    text-decoration: underline;
}

/* 引用 */
body blockquote,
body.vscode-body blockquote,
.markdown-body blockquote,
.markdown-preview.markdown-preview blockquote,
.body blockquote {
    margin: 0.5em 0;
    padding: 0.2em 1em;
    color: var(--muted);
    background-color: var(--color-gray3);
    border-left: 0.25em solid var(--border);
}

/* 水平線 */
body hr,
body.vscode-body hr,
.markdown-body hr,
.markdown-preview.markdown-preview hr,
.body hr {
    border: 0;
    height: 1px;
    background: var(--border);
    margin: 0.5em 0;
}

/* =========================
   3) リスト
   ========================= */
/* 元CSSは list-style を none にしたり marker を弄ったりで混乱していたので、
   “標準のマーカー”を基本にして、ネストだけ少し整える */
body ul,
body.vscode-body ul,
.markdown-body ul,
.markdown-preview.markdown-preview ul,
.body ul,
body ol,
body.vscode-body ol,
.markdown-body ol,
.markdown-preview.markdown-preview ol,
.body ol {
    margin: 0.5em 0 0.5em;
    padding-left: 2em;
}

/* ネスト時の詰まりを防ぐ */
body li,
body.vscode-body li,
.markdown-body li,
.markdown-preview.markdown-preview li,
.body li {
    margin: 0.3em 0;
}

/* リスト内の段落は字下げを解除（リスト + text-indent は崩れやすい） */
body li p,
body.vscode-body li p,
.markdown-body li p,
.markdown-preview.markdown-preview li p,
.body li p {
    text-indent: 0;
    margin: 0.3em 0;
}

/* リスト：ネスト深さ別の marker 設定 */

/* 対象ルート（あなたの設計に合わせて統一） */
:is(body, body.vscode-body, .markdown-body, .body, .markdown-preview.markdown-preview) {
    /* 色（深さごと） */
    --ul-marker-1: var(--color-main-blue);
    --ul-marker-2: var(--color-blue1);
    --ul-marker-3: var(--color-gray0);
    --ul-marker-4: var(--color-gray1);

    --ol-marker-1: var(--color-main-blue);
    --ol-marker-2: var(--color-blue1);
    --ol-marker-3: var(--color-gray0);
    --ol-marker-4: var(--color-gray1);
}

/* ---------- ul: 深さごとに「記号」と「色」を変える ---------- */
/* 記号（list-style-type はマーカー種別を設定できる） :contentReference[oaicite:3]{index=3} */

body ul,
body.vscode-body ul,
.markdown-body ul,
.markdown-preview.markdown-preview ul,
.body ul {
    list-style-type: "■ ";
}

body ul ul,
body.vscode-body ul ul,
.markdown-body ul ul,
.markdown-preview.markdown-preview ul ul,
.body ul ul {
    list-style-type: "● ";
}

body ul ul ul,
body.vscode-body ul ul ul,
.markdown-body ul ul ul,
.markdown-preview.markdown-preview ul ul ul,
.body ul ul ul {
    list-style-type: "○ ";
}

body ul ul ul ul,
body.vscode-body ul ul ul ul,
.markdown-body ul ul ul ul,
.markdown-preview.markdown-preview ul ul ul ul,
.body ul ul ul ul {
    list-style-type: "▶ ";
}

/* 色（::marker でマーカー箱を選択できる） :contentReference[oaicite:4]{index=4} */
body ul>li::marker,
body.vscode-body ul>li::marker,
.markdown-body ul>li::marker,
.markdown-preview.markdown-preview ul>li::marker,
.body ul>li::marker {
    color: var(--ul-marker-1);
}

body ul ul>li::marker,
body.vscode-body ul ul>li::marker,
.markdown-body ul ul>li::marker,
.markdown-preview.markdown-preview ul ul>li::marker,
.body ul ul>li::marker {
    color: var(--ul-marker-2);
}

body ul ul ul>li::marker,
body.vscode-body ul ul ul>li::marker,
.markdown-body ul ul ul>li::marker,
.markdown-preview.markdown-preview ul ul ul>li::marker,
.body ul ul ul>li::marker {
    color: var(--ul-marker-3);
}

body ul ul ul ul>li::marker,
body.vscode-body ul ul ul ul>li::marker,
.markdown-body ul ul ul ul>li::marker,
.markdown-preview.markdown-preview ul ul ul ul>li::marker,
.body ul ul ul ul>li::marker {
    color: var(--ul-marker-4);
}

/* ---------- ol: 深さごとに「番号形式」と「色」を変える ---------- */
/* 番号形式（decimal / lower-alpha / lower-roman など） :contentReference[oaicite:5]{index=5} */
body ol,
body.vscode-body ol,
.markdown-body ol,
.markdown-preview.markdown-preview ol,
.body ol {
    list-style-type: decimal;
}

body ol ol,
body.vscode-body ol ol,
.markdown-body ol ol,
.markdown-preview.markdown-preview ol ol,
.body ol ol {
    list-style-type: lower-alpha;
}

body ol ol ol,
body.vscode-body ol ol ol,
.markdown-body ol ol ol,
.markdown-preview.markdown-preview ol ol ol,
.body ol ol ol {
    list-style-type: lower-roman;
}

body ol ol ol ol,
body.vscode-body ol ol ol ol,
.markdown-body ol ol ol ol,
.markdown-preview.markdown-preview ol ol ol ol,
.body ol ol ol ol {
    list-style-type: decimal-leading-zero;
}

/* 色 */
body ol>li::marker,
body.vscode-body ol>li::marker,
.markdown-body ol>li::marker,
.markdown-preview.markdown-preview ol>li::marker,
.body ol>li::marker {
    color: var(--ol-marker-1);
}

body ol ol>li::marker,
body.vscode-body ol ol>li::marker,
.markdown-body ol ol>li::marker,
.markdown-preview.markdown-preview ol ol>li::marker,
.body ol ol>li::marker {
    color: var(--ol-marker-2);
}

body ol ol ol>li::marker,
body.vscode-body ol ol ol>li::marker,
.markdown-body ol ol ol>li::marker,
.markdown-preview.markdown-preview ol ol ol>li::marker,
.body ol ol ol>li::marker {
    color: var(--ol-marker-3);
}

body ol ol ol ol>li::marker,
body.vscode-body ol ol ol ol>li::marker,
.markdown-body ol ol ol ol>li::marker,
.markdown-preview.markdown-preview ol ol ol ol>li::marker,
.body ol ol ol ol>li::marker {
    color: var(--ol-marker-4);
}

/* リスト行間・li間余白（ネスト深さに依存しない）*/
/* ul/ol 自体の行間も固定（li側で決めるなら不要だが保険） */
:is(body, body.vscode-body, .markdown-body, .body, .markdown-preview.markdown-preview) :is(ul, ol) {
    line-height: var(--li-line) !important;
}

/* li の行間・li間余白を固定（ネスト深さに依存しない） */
:is(body, body.vscode-body, .markdown-body, .body, .markdown-preview.markdown-preview) :is(ul, ol) li {
    line-height: var(--li-line) !important;
    margin-block: var(--li-gap-y) !important;
}

/* li直下の p 等は、本文ルール（pの text-indent / margin）を打ち消してリスト崩れを防ぐ */
:is(body, body.vscode-body, .markdown-body, .body, .markdown-preview.markdown-preview) :is(ul, ol) li> :is(p, div, blockquote, pre, table) {
    margin-block: var(--li-inner-gap-y) !important;
}

/* =========================
   4) 表
   ========================= */
body table,
body.vscode-body table,
.markdown-body table,
.markdown-preview.markdown-preview table,
.body table {
    border-collapse: collapse;
    /* 横スクロール許可 */
    overflow-x: auto;
    margin: auto;
}

body th,
body.vscode-body th,
.markdown-body th,
.markdown-preview.markdown-preview th,
.body th,
body td,
body.vscode-body td,
.markdown-body td,
.markdown-preview.markdown-preview td,
.body td {
    border: 1px solid var(--border);
    padding: 0.2em 1em;
}

body thead th,
body.vscode-body thead th,
.markdown-body thead th,
.markdown-preview.markdown-preview thead th,
.body thead th {
    background: var(--color-blue0);
    /* 元CSSの色味を踏襲 */
    color: white;
    text-align: center;
    font-weight: bold;
}

/* 行の縞 */
body tbody tr:nth-child(odd),
body.vscode-body tbody tr:nth-child(odd),
.markdown-body tbody tr:nth-child(odd),
.markdown-preview.markdown-preview tbody tr:nth-child(odd),
.body tbody tr:nth-child(odd) {
    background: var(--color-gray3);
}

body tbody tr:nth-child(even),
body.vscode-body tbody tr:nth-child(even),
.markdown-body tbody tr:nth-child(even),
.markdown-preview.markdown-preview tbody tr:nth-child(even),
.body tbody tr:nth-child(even) {
    background: var(--color-blue3);
}

/* =========================
   5) 図
   ========================= */
body img,
body.vscode-body img,
.markdown-body img,
.markdown-preview.markdown-preview img,
.body img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 0.5em auto;
    border: 1px solid var(--color-gray0);
    background: white;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
}

/* =========================
   6) キャプション
   ========================= */
/* 図のみの特殊方法 */
body p>img+em,
body.vscode-body p>img+em,
.markdown-body p>img+em,
.markdown-preview.markdown-preview p>img+em,
.body p>img+em {
    display: block;
    text-align: center;
    color: var(--muted);
    font-style: normal;
    /* em を “見た目キャプション” に寄せる */
    margin: 0.5em auto;
    max-width: 100%;
}

/* “右寄せ画像”の運用があるなら、Pandocの属性 align も含めて吸収 */
body img[alt="right"],
body.vscode-body img[alt="right"],
.markdown-body img[alt="right"],
.markdown-preview.markdown-preview img[alt="right"],
.body img[alt="right"],
body img[align="right"],
body.vscode-body img[align="right"],
.markdown-body img[align="right"],
.markdown-preview.markdown-preview img[align="right"],
.body img[align="right"] {
    float: right;
    margin: 0.2em 0 0.6em 1em;
    max-width: 50%;
}

/* 図・表のキャプション */
body caption,
body.vscode-body caption,
.markdown-body caption,
.markdown-preview.markdown-preview caption,
.body caption,
body figcaption,
body.vscode-body figcaption,
.markdown-body figcaption,
.markdown-preview.markdown-preview figcaption,
.body figcaption {
    text-align: center;
    color: var(--muted);
    font-style: normal;
    /* em を “見た目キャプション” に寄せる */
    margin: 0.5em auto;
    max-width: 100%;
}

/* float を使った場合の崩れ対策：見出し等で回り込み解除 */
body h1,
body h2,
body h3,
body h4,
body h5,
body h6,
body.vscode-body h1,
body.vscode-body h2,
body.vscode-body h3,
body.vscode-body h4,
body.vscode-body h5,
body.vscode-body h6,
.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6,
.markdown-preview.markdown-preview h1,
.markdown-preview.markdown-preview h2,
.markdown-preview.markdown-preview h3,
.markdown-preview.markdown-preview h4,
.markdown-preview.markdown-preview h5,
.markdown-preview.markdown-preview h6,
.body h1,
.body h2,
.body h3,
.body h4,
.body h5,
.body h6 {
    clear: both;
}

/* =========================
   7) コード（インライン/ブロック）
   ========================= */
body code,
body.vscode-body code,
.markdown-body code,
.markdown-preview.markdown-preview code,
.body code,
body tt,
body.vscode-body tt,
.markdown-body tt,
.markdown-preview.markdown-preview tt,
.body tt {
    font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: var(--base-font);
    color: var(--color-green0);
    background: var(--color-gray3);
    padding: 0.2em 0.35em;
    border-radius: 6px;
}

/* コードブロック */
body pre,
body.vscode-body pre,
.markdown-body pre,
.markdown-preview.markdown-preview pre,
.body pre {
    background: var(--code-bg);
    padding: 14px 16px;
    border-radius: 4px;
    overflow: auto;
    margin: 0.8em 0 1.2em;
}

body pre code,
body.vscode-body pre code,
.markdown-body pre code,
.markdown-preview.markdown-preview pre code,
.body pre code {
    background: transparent;
    padding: 0;
    border-radius: 0;
}



/* =========================
   8) Mermaid（副作用を抑えた最小限）
   ========================= */
/* 元CSSの `all: default !important;` はレンダリング差・崩壊の原因になりやすい。
   Mermaid は “フォントだけ揃える/サイズ調整” 程度に留めるのが安全 */
.mermaid {
    margin: 1em 0;
    overflow-x: auto;
    /* 横長グラフの保険 */
}

.mermaid svg {
    max-width: 100%;
    height: auto;
    /* 本文と同じフォントに揃えたい場合（Mermaidの既定を優先したいなら消す） */
    font-family: inherit;
}

/* =========================
   9) TOC / サイドナビ（Pandoc標準 + 互換）
   ========================= */
#TOC {
    /* “固定サイドバー”はPDF化で破綻しやすいので、基本は通常フロー表示 */
    padding: 0.5em 0.5em;
    margin: 0 0 1em;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: var(--color-gray3);
    font-size: 0.8em;
}

/* 互換：元の .sidenav を使っている場合の最低限 */
.sidenav {
    padding: 0.5em 0.5em;
    margin: 0 0 1.2em;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: var(--color-gray3);
    font-size: 0.92em;
}

#TOC a,
.sidenav a {
    color: var(--link);
    text-decoration: none;
}

#TOC a:hover,
.sidenav a:hover {
    color: var(--link-hover);
    text-decoration: underline;
}

/* =========================
   10) 印刷/PDF（Pandoc PDF化を意識）
   ========================= */
@media print {

    /* 印刷では余白を少し詰めて、色を落ち着かせる */
    body,
    body.vscode-body,
    .markdown-body,
    .markdown-preview.markdown-preview,
    .body {
        max-width: none;
        padding: 0;
        color: #000;
        background: #fff;
    }

    /* サイド固定は印刷で崩れるので無効化 */
    .sidenav {
        position: static !important;
        width: auto !important;
        height: auto !important;
    }
}
